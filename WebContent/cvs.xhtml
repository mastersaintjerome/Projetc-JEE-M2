<?xml version="1.0" encoding="UTF-8" ?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:composition template="/template/mylayout.xhtml">
	<ui:define name="content">
		<f:view>

			<h1>Liste des Activit√©es :</h1>

			<h:form>
		
		    <!-- afficher les villes si elles existent -->
		    <h:panelGroup rendered="#{cvs.theInstance.activities.size() > 0}">
		        <table class="table">
		            <ui:repeat var="activity" varStatus="a" value="#{cvs.theInstance.activities}">
		                <tr>
		                    <td><h:outputText value="#{a.year}" /></td>
		                    <td><h:outputText value="#{a.title}" /></td>
		                    <td><h:outputText value="#{a.nature}" /></td>
		                    <td><h:commandButton value="modification"
		                            action="#{ajaxBean.updateCity(s.index)}"
		                            styleClass="btn btn-success btn-xs">
		                            <f:ajax execute="@this" render="@form" />
		                        </h:commandButton></td>
		                    <td><h:commandButton value="Sup"
		                            action="#{ajaxBean.removeCity(s.index)}"
		                            styleClass="btn btn-success btn-xs">
		                            <f:ajax execute="@this" render="@form" />
		                        </h:commandButton></td>
		                    
		                </tr>
		            </ui:repeat>
		        </table>
		    </h:panelGroup>
		
		    <!-- formulaire pour ajouter une ville -->
		    <div class="form-group">
		        <h:inputText id="activityTitle" value="#{activityAjaxBean.titleText}"
		            styleClass="form-control">
		            <f:validateLength minimum="3"/>
		        </h:inputText>
		        <h:inputText id="activityNature" value="#{activityAjaxBean.natureText}"
		            styleClass="form-control">
		            <f:validateLength minimum="3"/>
		        </h:inputText>
		        <h:inputText id="activityYear" value="#{activityAjaxBean.yearText}"
		            styleClass="form-control">
		            <f:validat validatorId=""/>
		        </h:inputText>
		        <h:inputText id="activityDescription" value="#{activityAjaxBean.descriptionText}"
		            styleClass="form-control">
		        </h:inputText>
		        <h:inputText id="activityWebAdress" value="#{activityAjaxBean.webAdressText}"
		            styleClass="form-control">
		            <f:validator validatorId="urlValidator" />
		        </h:inputText>
		        <h:message id="messageActivity" for="activity"
		            styleClass="label label-danger" />
		    </div>
		    <h:commandButton value="#{activityAjaxBean.buttonText}" action="#{activityAjaxBean.addActivity()}"
		        styleClass="btn btn-primary">
		        <f:ajax execute="@this activity" render="@form" />
		    </h:commandButton>
		</h:form>
		</f:view>
	</ui:define>
</ui:composition>

</html>